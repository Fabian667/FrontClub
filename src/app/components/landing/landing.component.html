<div class="landing">
  <header class="site-header">
    <div class="container header-content">
      <div class="brand">
        <a routerLink="/" class="brand-link">
          <span class="brand-plus" aria-hidden="true">+</span>
          <span class="brand-verde">Verde</span>
        </a>
      </div>
      <!-- Botón menú hamburguesa -->
      <button class="menu-toggle" type="button"
              aria-label="Abrir menú"
              aria-controls="primary-nav"
              [attr.aria-expanded]="menuOpen()"
              (click)="toggleMenu()">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
      <nav id="primary-nav" class="nav-links" [class.open]="menuOpen()">
        <a href="#noticias" *ngIf="noticias().length > 0" (click)="closeMenu()">Noticias</a>
        <a href="#actividades" (click)="closeMenu()">Actividades</a>
        <a href="#instalaciones" (click)="closeMenu()">Instalaciones</a>
        <a href="#eventos" (click)="closeMenu()">Eventos</a>
        <a routerLink="/reservas" (click)="closeMenu()">Reservas</a>
        <a href="#contacto" (click)="closeMenu()">Contacto</a>
        <a *ngIf="!isLoggedIn()" routerLink="/admin/login" class="login-btn" (click)="closeMenu()">Login</a>
        <button *ngIf="isLoggedIn()" (click)="logout(); closeMenu()" class="login-btn">Salir</button>
      </nav>
    </div>
  </header>
  <!-- Hero Section -->
  <section class="hero" [ngStyle]="{ 'background-image': backgroundStyle() }">
    <div class="hero-content">
      <h1 class="brand-title">
        <span class="brand-plus" aria-hidden="true">+</span>
        <span class="brand-verde">Verde</span>
      </h1>
      <p>Descubre nuestras actividades, instalaciones, eventos y noticias</p>
      <!-- Botón de administrar eliminado -->
      <div class="details" *ngIf="reservasCount() >= 0">
        <span>Reservas registradas: {{ reservasCount() }}</span>
        <span *ngIf="reservas().length > 0"> | <a routerLink="/reservas">Ver reservas</a></span>
      </div>
    </div>
  </section>

  <!-- Noticias Section -->
  <section class="section" id="noticias" *ngIf="noticias().length > 0">
    <div class="container">
      <h2>Noticias</h2>
      <div class="grid">
        <div class="card" *ngFor="let noticia of noticias()">
          <div class="card-image" *ngIf="noticia.imagenUrl">
            <img [src]="noticia.imagenUrl" alt="Imagen noticia" appFallbackImage />
          </div>
          <div class="card-content">
            <h3>{{ noticia.titulo }}</h3>
            <p *ngIf="noticia.descripcion">{{ noticia.descripcion }}</p>
            <div class="details" *ngIf="noticia.fecha">
              <span>{{ noticia.fecha }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Actividades Section -->
  <section class="section" id="actividades">
    <div class="container">
      <h2>Nuestras Actividades</h2>
      <div class="grid">
        <div class="card" *ngFor="let actividad of actividades()">
          <div class="card-content">
            <h3>{{ actividad.nombre }}</h3>
            <p>{{ actividad.descripcion }}</p>
            <div class="details" *ngIf="actividad.diaSemana || actividad.horaInicio">
              <span *ngIf="actividad.diaSemana">{{ actividad.diaSemana }}</span>
              <span *ngIf="actividad.horaInicio">{{ actividad.horaInicio }} - {{ actividad.horaFin }}</span>
              <span *ngIf="actividad.precioHora !== null && actividad.precioHora !== undefined" class="precio">${{ actividad.precioHora }}/hora</span>
            </div>
          </div>
        </div>
      </div>
      <p *ngIf="actividades().length === 0" class="empty-msg">No hay actividades disponibles por el momento.</p>
    </div>
  </section>

  <!-- Instalaciones Section -->
  <section class="section alt" id="instalaciones">
    <div class="container">
      <h2>Nuestras Instalaciones</h2>
      <div class="grid">
        <div class="card" *ngFor="let instalacion of instalaciones()">
          <div class="card-content">
            <h3>{{ instalacion.nombre }}</h3>
            <p>{{ instalacion.descripcion }}</p>
            <div class="details" *ngIf="instalacion.capacidad">
              <span>Capacidad: {{ instalacion.capacidad }} personas</span>
              <span *ngIf="instalacion.precioHora !== null && instalacion.precioHora !== undefined" class="precio">${{ instalacion.precioHora }}/hora</span>
            </div>
          </div>
          <div class="card-image" *ngIf="instalacion.foto || instalacion.imagen" style="margin-top:0.5rem">
            <img [src]="instalacion.foto || instalacion.imagen" alt="Imagen instalación" appFallbackImage />
          </div>
        </div>
      </div>
      <p *ngIf="instalaciones().length === 0" class="empty-msg">No hay instalaciones disponibles o no se pudieron cargar.</p>
    </div>
  </section>

  <!-- Eventos Section -->
  <section class="section" id="eventos">
    <div class="container">
      <h2>Próximos Eventos</h2>
      <div class="grid">
        <div class="card" *ngFor="let evento of eventos()">
          <div class="card-image" *ngIf="evento.imagen">
            <img [src]="evento.imagen" alt="Imagen evento" appFallbackImage />
          </div>
          <div class="card-content">
            <h3>{{ evento.nombre }}</h3>
            <p>{{ evento.descripcion }}</p>
            <div class="details" *ngIf="evento.fecha || evento.lugar">
              <span *ngIf="evento.fecha">{{ evento.fecha }}</span>
              <span *ngIf="evento.horaInicio">{{ evento.horaInicio }} - {{ evento.horaFin }}</span>
              <span *ngIf="evento.lugar">{{ evento.lugar }}</span>
              <span *ngIf="evento.costo !== null && evento.costo !== undefined" class="precio">${{ evento.costo }}</span>
            </div>
          </div>
        </div>
      </div>
      <p *ngIf="eventos().length === 0" class="empty-msg">No hay eventos programados o no se pudieron cargar.</p>
    </div>
  </section>

  <!-- Reservas Section -->
  <section class="section alt" id="reservas" *ngIf="reservas().length > 0">
    <div class="container">
      <h2>Reservas de {{ clubName() || 'nuestro club' }}</h2>
      <div class="grid">
        <div class="card" *ngFor="let r of reservas()">
          <div class="card-content">
            <h3>{{ getInstalacionNombre(r.instalacion_id) }}</h3>
            <div class="details">
              <span>Fecha: {{ r.fecha_reserva }}</span>
              <span *ngIf="r.hora_inicio">Inicio: {{ r.hora_inicio }}</span>
              <span *ngIf="r.hora_fin">Fin: {{ r.hora_fin }}</span>
              <span *ngIf="r.cantidad_personas">Personas: {{ r.cantidad_personas }}</span>
              <span *ngIf="r.estado">Estado: {{ r.estado }}</span>
            </div>
            <p *ngIf="r.motivo">Motivo: {{ r.motivo }}</p>
            <p *ngIf="r.observaciones">Observaciones: {{ r.observaciones }}</p>
          </div>
        </div>
      </div>
      <p *ngIf="reservas().length === 0" class="empty-msg">No hay reservas para mostrar.</p>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contacto" class="contact-section">
    <div class="container">
      <h2>Contacto</h2>
      <div class="contact-grid">
        <!-- Contact Form -->
        <div class="contact-form">
          <h3>Envíanos un mensaje</h3>
          <form #contactForm="ngForm" (ngSubmit)="onContactSubmit(contactForm)">
            <div class="form-group">
              <label for="name">Nombre</label>
              <input type="text" id="name" name="name" ngModel required>
            </div>
            <div class="form-group">
              <label for="message">Mensaje</label>
              <textarea id="message" name="message" rows="4" ngModel required></textarea>
            </div>
            <button type="submit" class="submit-btn" [disabled]="!contactForm.valid">Enviar</button>
          </form>
        </div>

        <!-- Contact Info -->
        <div class="contact-info">
          <h3>Información de contacto</h3>
          <!-- Eliminado: no mostrar contraseñas en la UI -->
          <div class="info-item" *ngIf="contactInfo().address">
            <strong>Dirección:</strong>
            <p>{{ contactInfo().address }}</p>
          </div>
          <div class="info-item" *ngIf="contactInfo().phone">
            <strong>Teléfono:</strong>
            <p>{{ contactInfo().phone }}</p>
          </div>
          <div class="info-item" *ngIf="contactInfo().email">
            <strong>Email:</strong>
            <p>{{ contactInfo().email }}</p>
          </div>
          
          <!-- Social Media -->
          <div class="social-links" *ngIf="contactInfo().facebook || contactInfo().instagram || contactInfo().whatsapp">
            <h4>Síguenos</h4>
            <div class="social-buttons">
              <a *ngIf="contactInfo().facebook" [href]="contactInfo().facebook" target="_blank" rel="noopener" class="social-btn facebook" aria-label="Facebook">
                <img src="icons/facebook.svg" alt="Facebook" class="social-icon" />
                <span class="sr-only">Facebook</span>
              </a>
              <a *ngIf="contactInfo().instagram" [href]="contactInfo().instagram" target="_blank" rel="noopener" class="social-btn instagram" aria-label="Instagram">
                <img src="icons/instagram.svg" alt="Instagram" class="social-icon" />
                <span class="sr-only">Instagram</span>
              </a>
              <a *ngIf="contactInfo().whatsapp" [href]="getWhatsappUrl(contactInfo().whatsapp)" target="_blank" rel="noopener" class="social-btn whatsapp" aria-label="WhatsApp">
                <img src="icons/whatsapp.svg" alt="WhatsApp" class="social-icon" />
                <span class="sr-only">WhatsApp</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Ubicación (mapa) fuera del bloque de Información de contacto -->
  <section class="map-section" *ngIf="contactInfo().mapsUrl">
    <div class="container">
      <div class="map-container">
        <iframe 
          [src]="contactInfo().mapsUrl" 
          width="100%" 
          height="300" 
          style="border:0;" 
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>
        &copy; 2025 
        <span class="brand-plus" aria-hidden="true">+</span>
        <span class="brand-verde">Verde</span>. Todos los derechos reservados.
      </p>
    </div>
  </footer>
</div>